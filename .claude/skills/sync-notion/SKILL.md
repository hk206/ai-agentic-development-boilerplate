---
name: sync-notion
description: ドキュメントをNotionワークスペースに同期する。PRD、ユーザーストーリー、タスクをNotionに送信したいときに使用する。
argument-hint: "[ドキュメントファイルパスまたはドキュメント種別]"
disable-model-invocation: true
allowed-tools: Read, Glob, Bash
---

# Notion同期

`$ARGUMENTS` で指定されたドキュメントをNotionに同期する。

## 前提条件

- Notion MCPサーバーが `.mcp.json` で設定されていること（リモートHTTP: `https://mcp.notion.com/mcp`）
- OAuth認証が完了していること（初回は `/mcp` コマンドで認証フローを実行）
- プロジェクトページのセットアップが完了していること（初期セットアップ参照）

## プロジェクトページの初期セットアップ

初回のみ実行する。ユーザーが空のNotionページURLを指定した場合はそのページ配下に、指定がなければ新規ページを作成して以下の構造を構築する:

- **要件定義** ページ（PRD用）
- **バックログ** データベース（ユーザーストーリー用）
  - プロパティ: タイトル, ステータス, 優先度, ポイント, 関連PRD
- **スプリント** データベース（タスク用）
  - プロパティ: タイトル, ステータス, 種別, 見積もり, 優先度, 担当者, 関連ストーリー
- **バグトラッカー** データベース（バグレポート用）
  - プロパティ: タイトル, 深刻度, ステータス, 担当者, 報告日

## 同期手順

1. 対象ドキュメントを読み込む
2. Notion MCPサーバーのツールを使用してページを作成/更新する
3. 同期結果を報告する

## 同期マッピング

| ドキュメント種別 | ローカル | Notion同期先 |
|----------------|---------|-------------|
| PRD | `docs/prd/` | 「要件定義」ページ配下 |
| ユーザーストーリー | `docs/user-stories/` | 「バックログ」データベース |
| タスク | `docs/tasks/` | 「スプリント」データベース |
| バグレポート | `docs/bugs/` | 「バグトラッカー」データベース |

## 注意事項

- 既存ページがある場合は更新する（重複作成しない）
- 同期結果をユーザーに報告する

## トラブルシューティング

- 認証エラー: `/mcp` コマンドでOAuth認証を再実行する
- ページが見つからない: OAuth認証時にアクセスを許可したページか確認する
- ツールが表示されない: Claude Codeを再起動してMCPサーバーを再読み込みする
